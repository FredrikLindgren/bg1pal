<!doctype html>

<html>
  <head>
    <title>BG1 Platform-Abstraction Library</title>
    <meta charset="utf-8">
  </head>

  <body>
    <h1>BG1 Platform-Abstraction Library</h1>

    <p>The BG1 Platform-Abstraction Library (BG1PAL) is intended to
      facilitate platform compatibility for BG1 mods. The major BG1
      platforms all use different naming schemes for their BG1
      resources, which could require mods that target more than one
      platform to refer to the same resource by a different name for
      each of the targeted platforms. BG1PAL relieves the mod author
      of the burden of keeping track of which files differ between
      platforms, how they differ, what exceptions there are from
      expectations, and several other complicating factors involved in
      cross-platform resource naming. It does this by spanning all
      major BG1 platforms and accounting for all their known
      differences, exceptions and idiosyncrasies compared to one
      reference platform: the original edition of <i>Baldur's
      Gate</i>, including its expansion, <i>Tales of the Sword
      Coast</i>. In other words, the mod author refers to a resource
      by its canonical BG1 name and BG1PAL converts it into the right
      resource name for whatever BG1 platform the mod happens to be
      installed on.
    </p>
    <p>Supported platforms are:</p>
    <ul>
      <li><i>Baldur's Gate</i>, including <i>Tales of the Sword
          Coast</i>
      </li>
      <li><i>EasyTutu</i></li>
      <li><i>Baldur's Gate Trilogy</i></li>
      <li><i>Baldur's Gate: Enhanced Edition</i></li>
      <li><i>Baldur's Gate: Enhanced Edition Trilogy</i></li>
    </ul>
    <p>BG1PAL is licenced under the GNU General Public License,
      version 3 or any later version, with the additional permission
      that you may convey verbatim copies while only retaining existing
      notices of copyright and absence of warranty.
    </p>

    <h2>Usage</h2>
    <p>To use BG1PAL in your mod, place the file fl#bg1pal.tpa within
      your mod folder and add the following line to your TP2 file, for
      example, in its <code>ALWAYS</code> section.
    </p>
    <blockquote>
      <code>INCLUDE</code> <code>~yourmod/path/to/fl#bg1pal.tpa~</code>
    </blockquote>
    <p>BG1PAL provides the function <code>fl#bg1pal</code>, which is
      available both as an action and a patch
      function. <code>fl#bg1pal</code> has the string
      variables <code>file</code>, <code>resource</code>
      and <code>type</code> and the return
      values <code>file</code>, <code>resource</code>
      and <code>type</code>. Note that all return values are available
      and usable regardless of which argument is provided. You are
      thus, for example, able to provide the <code>file</code> string
      variable, but use the <code>resource</code> return value.
    </p>
    <ul>
      <li>String variables:
        <ul>
          <li><code>file</code> must be a valid file name,
            including both the resource name as well as its file
            extension, separated by a full stop in the conventional
            style.
          </li>
          <li><code>resource</code> must be a valid resource name and
            must not include a file extension. <code>resource</code>
            requires <code>type</code>. <code>file</code> takes
            precedence over <code>resource</code>.
          </li>
          <li><code>type</code> must be a valid resource type,
            as determined by the corresponding file
            extension. <code>type</code>
            requires <code>resource</code>. <code>file</code> takes
            precedence over <code>type</code>.
          </li>
        </ul>
      </li>
      <li>Return values:
        <ul>
          <li><code>file</code> returns the full file name of the
            canonical resource, as it is named on the platform on
            which the mod is being installed.
          </li>
          <li><code>resource</code> returns the resource name of the
            canonical resource, as it is named on the platform on
            which the mod is being installed.
          </li>
          <li><code>type</code> returns the resource type of the
            canonical resource, in the form of its appropriate file
            extension for the platform on which the mod is being
            installed.
          </li>
        </ul>
      </li>
    </ul>

    <h2>Credit</h2>
    <ul>
      <li>K4thos for contributing towards EET compatibility.</li>
    </ul>

    <h2>Version History</h2>
    <p>Version 1.2.1 &ndash; 2015-08-25</p>
    <ul>
      <li>Interfaces work as expected on platforms for which there is
        no resource conversion.</li>
      <li>Add tests for BG1.</li>
    </ul>

    <p>Version 1.2.0 &ndash; 2015-08-18</p>
    <ul>
      <li>Compatibility with EET.</li>
      <li>Better automated tests.</li>
      <li>Correct conversion of night tilesets and WEDs.</li>
      <li>Correct conversion of tilesets on BGT.</li>
      <li>Correct conversion of area scripts on BGT.</li>
      <li>Fix serious bug in <code>file</code> interface.</li>
      <li>Correct conversion of portrait BMPs on Tutu.</li>
    </ul>

    <p>Version 1.1.1 &ndash; 2015-01-31</p>
    <ul>
      <li>Fix an evaluation error.</li>
      <li>Improve documentation.</li>
    </ul>

    <p>Version 1.1.0 &ndash; 2014-07-07</p>
    <ul>
      <li>Add the <code>resource</code> and <code>type</code>
        variables.
      </li>
      <li>Add automated tests.</li>
    </ul>

    <p>Version 1.0.0: initial version</p>
  </body>
</html>
